//
// Created by VermutMac on 8/24/2017.
//

#include "led_matrix.h"

#define WIDTH   16
#define HEIGHT  16

//     LEDMatrix(a, b, c, d, oe, r1, stb, clk);
LEDMatrix matrix(A0, A1, A2, A3, 2, 3, 4, 5);

// Display Buffer 128 = 64 * 16 / 8
uint8_t displaybuf[WIDTH * HEIGHT / 8] = {
		0x00, 0x10, 0x00, 0x38, 0x00, 0x7c, 0x00, 0xfe, 0x00, 0x38, 0x00, 0x38, 0x00, 0x38, 0x00, 0x00,     // UP
		0x00, 0x38, 0x00, 0x38, 0x00, 0x38, 0x00, 0xfe, 0x00, 0x7c, 0x00, 0x38, 0x00, 0x10, 0x00, 0x00,     // DOWN
};

uint8_t arrows[] = {
		0x00, 0x10, 0x00, 0x38, 0x00, 0x7c, 0x00, 0xfe, 0x00, 0x38, 0x00, 0x38, 0x00, 0x38, 0x00, 0x00,     // UP
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x38, 0x00, 0x38, 0x00, 0x38, 0x00, 0xfe, 0x00, 0x7c, 0x00, 0x38, 0x00, 0x10, 0x00, 0x00,     // DOWN

		0x00, 0x10, 0x00, 0x30, 0x00, 0x7e, 0x00, 0xfe, 0x00, 0x7e, 0x00, 0x30, 0x00, 0x10, 0x00, 0x00,     // RIGHT
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x10, 0x00, 0x18, 0x00, 0xfc, 0x00, 0xfe, 0x00, 0xfc, 0x00, 0x18, 0x00, 0x10, 0x00, 0x00,     // LEFT

};


void led_setup() {
	matrix.begin(displaybuf, WIDTH, HEIGHT);
}

void led_loop() {
	matrix.scan();
}

void led_show_picture(int picture) {
	matrix.drawImage(0, 0, WIDTH, HEIGHT, arrows + picture * (WIDTH + HEIGHT));
}

